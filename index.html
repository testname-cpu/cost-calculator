<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è²»ç”¨å¯¾åŠ¹æœãƒ»æœˆé–“å£²ä¸Šè¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body {
      font-family: "Hiragino Kaku Gothic ProN", sans-serif;
      background: #eef7f9;
      color: #333;
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    h2 {
      color: #00796b;
      border-left: 6px solid #00796b;
      padding-left: 10px;
      margin-top: 40px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background-color: #00796b;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
      width: 100%;
    }
    button:hover {
      background-color: #004d40;
    }
    .result {
      background: #ffffff;
      margin-top: 20px;
      padding: 20px;
      border-radius: 8px;
      border-left: 5px solid #00796b;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }
    th {
      background-color: #eeeeee;
    }
    .bg-light-blue {
      background-color: #e3f2fd;
    }
    .bg-light-green {
      background-color: #f1f8e9;
    }
    .bg-light-yellow {
      background-color: #fffde7;
    }
  </style>
</head>
<body>
  <h1>è²»ç”¨å¯¾åŠ¹æœãƒ»æœˆé–“å£²ä¸Šè¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>

  <h2>â–  åª’ä½“åŠ¹æœã®è¨ˆç®—</h2>
  <label>äºˆç´„å°‚ç”¨ç•ªå·é€šè©±æˆç«‹æ•°</label><input id="calls" type="number">
  <label>æ¥åº—ç‡ï¼ˆ%ï¼‰</label><input id="visitRate" type="number">
  <label>1çµ„ã‚ãŸã‚Šäººæ•°</label><input id="groupSize" type="number">
  <label>ãƒãƒƒãƒˆäºˆç´„æ¥åº—äººæ•°</label><input id="netVisit" type="number">
  <label>å®¢å˜ä¾¡</label><input id="unitPrice" type="number">
  <label>æœˆé¡å›ºå®šè²»ï¼ˆç¨è¾¼ï¼‰</label><input id="monthlyFee" type="number">
  <label>ãƒãƒƒãƒˆäºˆç´„äººæ•°ï¼ˆãƒ©ãƒ³ãƒï¼‰</label><input id="lunch" type="number">
  <label>ãƒãƒƒãƒˆäºˆç´„äººæ•°ï¼ˆãƒ‡ã‚£ãƒŠãƒ¼ï¼‰</label><input id="dinner" type="number">

  <h2>â–  æœˆé–“å£²ä¸Šãƒ»ã‚³ã‚¹ãƒˆæƒ³å®š</h2>
  <label>å¸­æ•°</label><input id="seats" type="number">
  <label>å¸­ç¨¼åƒç‡ï¼ˆ%ï¼‰</label><input id="seatRate" type="number">
  <label>å›è»¢æ•°</label><input id="rotation" type="number">
  <label>é¡§å®¢å˜ä¾¡ï¼ˆç¨è¾¼ï¼‰</label><input id="pricePerPerson" type="number">
  <label>å–¶æ¥­æ—¥æ•°</label><input id="days" type="number">

  <h2>â–  ã‚³ã‚¹ãƒˆæ¯”ç‡ã®è¨­å®š</h2>
  <label>é£ŸæåŸä¾¡ç‡ï¼ˆ%ï¼‰</label><input id="rateFood" type="number" value="30">
  <label>äººä»¶è²»ç‡ï¼ˆ%ï¼‰</label><input id="rateLabor" type="number" value="30">
  <label>å®¶è³ƒç‡ï¼ˆ%ï¼‰</label><input id="rateRent" type="number" value="10">
  <label>æ°´é“å…‰ç†±è²»ç‡ï¼ˆ%ï¼‰</label><input id="rateUtility" type="number" value="10">
  <label>ãã®ä»–è²»ç”¨ç‡ï¼ˆ%ï¼‰</label><input id="rateOther" type="number" value="10">

  <button onclick="calculateAll()">è¨ˆç®—ã™ã‚‹</button>

  <div class="result" id="result"></div>

  <script>
    function calculateAll() {
      const calls = +document.getElementById('calls').value;
      const visitRate = +document.getElementById('visitRate').value / 100;
      const groupSize = +document.getElementById('groupSize').value;
      const netVisit = +document.getElementById('netVisit').value;
      const unitPrice = +document.getElementById('unitPrice').value;
      const monthlyFee = +document.getElementById('monthlyFee').value;
      const lunch = +document.getElementById('lunch').value;
      const dinner = +document.getElementById('dinner').value;

      const seats = +document.getElementById('seats').value;
      const seatRate = +document.getElementById('seatRate').value / 100;
      const rotation = +document.getElementById('rotation').value;
      const pricePerPerson = +document.getElementById('pricePerPerson').value;
      const days = +document.getElementById('days').value;

      const rateFood = +document.getElementById('rateFood').value / 100;
      const rateLabor = +document.getElementById('rateLabor').value / 100;
      const rateRent = +document.getElementById('rateRent').value / 100;
      const rateUtility = +document.getElementById('rateUtility').value / 100;
      const rateOther = +document.getElementById('rateOther').value / 100;

      const totalRate = rateFood + rateLabor + rateRent + rateUtility + rateOther;
      const opRate = 1 - totalRate;

      const mediaSales = ((calls * visitRate * groupSize) + netVisit) * unitPrice;
      const mediaCost = monthlyFee + (lunch * 110) + (dinner * 220);
      const mediaROI = mediaSales / mediaCost;

      const monthlySales = seats * seatRate * rotation * pricePerPerson * days;
      const promoBudget = monthlySales * 0.04;

      const foodCost = monthlySales * rateFood;
      const laborCost = monthlySales * rateLabor;
      const rent = monthlySales * rateRent;
      const utility = monthlySales * rateUtility;
      const otherCost = monthlySales * rateOther;
      const opProfit = monthlySales * opRate;

      const flr = foodCost + laborCost + rent;
      const flRate = (foodCost + laborCost) / monthlySales * 100;
      const grossProfit = monthlySales - foodCost;
      const grossRate = grossProfit / monthlySales * 100;
      const laborShare = laborCost / grossProfit * 100;

      document.getElementById('result').innerHTML = `
        <h2>ğŸ“Š åª’ä½“ã®è²»ç”¨å¯¾åŠ¹æœ</h2>
        <table>
          <tr><th>é …ç›®</th><th>çµæœ</th><th>è¨ˆç®—å¼</th></tr>
          <tr><td>åª’ä½“çµŒç”±å£²ä¸Š</td><td>${mediaSales.toLocaleString()} å††</td><td>((é€šè©±æ•°Ã—æ¥åº—ç‡Ã—äººæ•°)+ãƒãƒƒãƒˆäºˆç´„äººæ•°)Ã—å®¢å˜ä¾¡</td></tr>
          <tr><td>åª’ä½“æ²è¼‰è²»ç”¨</td><td>${mediaCost.toLocaleString()} å††</td><td>æœˆé¡å›ºå®šè²»ï¼‹(ãƒ©ãƒ³ãƒäººæ•°Ã—110)+(ãƒ‡ã‚£ãƒŠãƒ¼äººæ•°Ã—220)</td></tr>
          <tr><td>è²»ç”¨å¯¾åŠ¹æœ</td><td>${mediaROI.toFixed(2)} å€</td><td>åª’ä½“çµŒç”±å£²ä¸Š Ã· æ²è¼‰è²»ç”¨</td></tr>
        </table>

        <h2>ğŸ“Š æœˆé–“å£²ä¸Šãƒ»ã‚³ã‚¹ãƒˆ</h2>
        <table>
          <tr><th>é …ç›®</th><th>çµæœ</th><th>è¨ˆç®—å¼</th></tr>
          <tr class="bg-light-blue"><td>æœˆé–“å£²ä¸Š</td><td>${monthlySales.toLocaleString()} å††</td><td>å¸­æ•°Ã—å¸­ç¨¼åƒç‡Ã—å›è»¢æ•°Ã—å˜ä¾¡Ã—å–¶æ¥­æ—¥æ•°</td></tr>
          <tr class="bg-light-blue"><td>è²©ä¿ƒè²»ç›®å®‰</td><td>${promoBudget.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—0.04</td></tr>

          <tr class="bg-light-green"><td>é£ŸæåŸä¾¡</td><td>${foodCost.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—${(rateFood*100).toFixed(1)}%</td></tr>
          <tr class="bg-light-green"><td>äººä»¶è²»</td><td>${laborCost.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—${(rateLabor*100).toFixed(1)}%</td></tr>
          <tr class="bg-light-green"><td>å®¶è³ƒ</td><td>${rent.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—${(rateRent*100).toFixed(1)}%</td></tr>
          <tr class="bg-light-green"><td>FLRã‚³ã‚¹ãƒˆ</td><td>${flr.toLocaleString()} å††</td><td>åŸä¾¡ï¼‹äººä»¶è²»ï¼‹å®¶è³ƒ</td></tr>
          <tr class="bg-light-green"><td>FLã‚³ã‚¹ãƒˆæ¯”ç‡</td><td>${flRate.toFixed(2)} %</td><td>(åŸä¾¡ï¼‹äººä»¶è²»)Ã·æœˆé–“å£²ä¸ŠÃ—100</td></tr>
          <tr class="bg-light-green"><td>æ°´é“å…‰ç†±è²»</td><td>${utility.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—${(rateUtility*100).toFixed(1)}%</td></tr>
          <tr class="bg-light-green"><td>ãã®ä»–è²»ç”¨</td><td>${otherCost.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—${(rateOther*100).toFixed(1)}%</td></tr>

          <tr class="bg-light-yellow"><td>å–¶æ¥­åˆ©ç›Š</td><td>${opProfit.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸ŠÃ—${(opRate*100).toFixed(1)}%</td></tr>
          <tr class="bg-light-yellow"><td>ç²—åˆ©ç›Š</td><td>${grossProfit.toLocaleString()} å††</td><td>æœˆé–“å£²ä¸Šâˆ’é£ŸæåŸä¾¡</td></tr>
          <tr class="bg-light-yellow"><td>ç²—åˆ©ç›Šç‡</td><td>${grossRate.toFixed(2)} %</td><td>ç²—åˆ©ç›ŠÃ·æœˆé–“å£²ä¸ŠÃ—100</td></tr>
          <tr class="bg-light-yellow"><td>åŠ´åƒåˆ†é…ç‡</td><td>${laborShare.toFixed(2)} %</td><td>äººä»¶è²»Ã·ç²—åˆ©ç›ŠÃ—100</td></tr>
        </table>
      `;
    }
  </script>
</body>
</html>
